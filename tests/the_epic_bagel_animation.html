<!DOCTYPE html>
<head>
    <title>
        Bagels
    </title>
</head>
<body bgColor="blue">
    <p id="debug"></p>
</body>

<script src="../beginningJS.js"></script>
<script>

Bagels = BeginningJS.init({
    ID: "Bagel",
    game: {
        assets: {
            imgs: [
                {
                    id: "THE_Bagel",
                    src: "../assets/imgs/bagel.png"
                }
            ],
            snds: []
        },
        sprites: [
            {
                id: "THEWorldsSourceOfBagels",
                vars: {
                    delay: 0,
                    debugDisplay: document.getElementById("debug")
                },
                visible: false,
                scripts: {
                    init: [],
                    main: [
                        {
                            code: (gameRef, me) => {
                                me.vars.delay--;
                                if (me.vars.delay <= 0) {
                                    me.vars.delay = 1;

                                    me.clone();
                                }

                                me.vars.debugDisplay.innerHTML = "FPS: " + Bagels.currentFPS + ". <br> Bagel count: " + (Bagels.game.sprites.length - 1);
                            },
                            stateToRun: "Hail the bagel overlords"
                        }
                    ]
                },
                img: "THE_Bagel",
                x: 0,
                y: 0,
                clones: {
                    vars: {
                        distance: 0
                    },
                    visible: true,
                    scripts: {
                        init: [
                            (gameRef, me) => {
                                me.visible = true;
                                me.setScale(0.05);

                                me.x = Bagels.width / 2;
                                me.y = Bagels.height / 2;

                                me.angle = (Math.random() * 360) - 180;
                            }
                        ],
                        main: [
                            (gameRef, me) => {
                                //me.vars.distance += 0.1;

                                //me.angle += 0.1;
                                if (me.angle > 180) {
                                    me.angle = -180;
                                }
                                //me.x = Bagels.width / 2;
                                //me.y = Bagels.height / 2;
                                //me.move(me.vars.distance, me.angle);
                                me.move(1, me.angle);

                                me.alpha -= 0.0025;

                                if (Math.abs(me.x - 400) > 800 + me.width || Math.abs(me.y - 225) > 450 + me.height || me.alpha < 0) {
                                    me.delete();
                                }
                            }
                        ]
                    }
                }
            }
        ]
    },
    width: 800,
    height: 450,
    config: {
        display: {
            fillScreen: true
        },
        state: "Hail the bagel overlords"
    }
});

</script>
