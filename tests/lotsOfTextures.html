<!DOCTYPE html>
<head>
    <title>
        Lots of textures
    </title>
</head>
<body bgColor="#202020"></body>

<script src="../bagel.js"></script>
<script>

game = Bagel.init({
    id: "Bagel",
    state: "game",
    vars: {
        textureTarget: 10000,
        textureCount: 0,
        speed: 2
    },
    game: {
        assets: {
            imgs: [
                {
                    id: "Bagel",
                    src: "../assets/imgs/bagel.png"
                }
            ],
            snds: []
        },
        sprites: [
            {
                id: "Bagel",
                scripts: {
                    init: [
                        {
                            code: me => {
                                me.x = game.width / 2;
                                me.y = game.height / 2;

                                me.vars.bagel = game.get.asset.img("Bagel");
                                game.debug.textures.showCombined(0);
                            },
                            stateToRun: "game"
                        }
                    ],
                    main: [
                        {
                            code: me => {
                                me.angle++;

                                let vars = game.vars;
                                let i = 0;
                                while (i < vars.speed) {
                                    if (vars.textureCount < vars.textureTarget) {
                                        Bagel.internal.render.texture.new("Bagel" + vars.textureCount, me.vars.bagel, game);
                                        vars.textureCount++;
                                    }
                                    i++;
                                }
                            },
                            stateToRun: "game"
                        }
                    ]
                },
                img: "Bagel",
                scale: 5,
                x: 0,
                y: 0
            }
        ]
    },
    width: 800,
    height: 450,
    config: {
        loading: {
            skip: true,
            mode: "preload"
        },
        display: {
            renderer: "webgl"
        }
    }
});

</script>
