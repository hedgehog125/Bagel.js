<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <meta name="description" content="A simple layer test in Bagel.js">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>
            Bagel.js layers
        </title>
    </head>
    <body bgColor="white"></body>
</html>
<script src="../bagel.js"></script>
<script>

game = Bagel.init({
    id: "game",
    game: {
        assets: {
            imgs: [
                {
                    id: "Bagel",
                    src: "../assets/imgs/bagel.png"
                },
                {
                    id: "SadBagel",
                    src: "../assets/imgs/sadbagel.png"
                }
            ],
            snds: []
        },
        scripts: {
            main: [
                {
                    code: game => {
                        if (game.vars.layerTick > 180) {
                            game.vars.layerTick = 1;
                        }
                        game.vars.layerTick++;
                    },
                    stateToRun: "game"
                }
            ]
        },
        sprites: [
            {
                id: "Bagels",
                clones: {
                    visible: true,
                    scripts: {
                        main: [
                            (me, game) => {
                                if (game.vars.layerTick % 60 == 0) {
                                    me.img = "Bagel";
                                }
                                if (game.vars.layerTick == 60 * (me.cloneID + 1)) {
                                    me.layer.bringToFront();
                                    me.img = "SadBagel";
                                }
                            }
                        ]
                    }
                },
                scripts: {
                    init: [
                        {
                            code: me => {
                                me.visible = false;

                                me.clone({
                                    x: me.x - 15,
                                    y: me.y - 15
                                });
                                me.clone({
                                    x: me.x + 15,
                                    y: me.y - 15
                                });
                                me.clone({
                                    x: me.x,
                                    y: me.y + 15
                                });
                            },
                            stateToRun: "game"
                        }
                    ]
                },
                x: (me, game) => game.width / 2,
                y: (me, game) => game.height / 2,
                scale: 1.5,
                img: "Bagel"
            }
        ]
    },
    width: 800,
    height: 450,
    state: "game",

    vars: {
        layerTick: 0
    },
    config: {
        loading: {
            skip: false,
            mode: "dynamic"
        }
    }
});

</script>
