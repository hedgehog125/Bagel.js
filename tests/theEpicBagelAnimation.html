<!DOCTYPE html>
<head>
    <title>
        Bagels ðŸ¥¯!
    </title>
</head>
<body bgColor="blue">
    <p id="debug"></p>
</body>

<script src="../bagel.js"></script>
<script>

Bagels = Bagel.init({
    id: "Bagel",
    game: {
        assets: {
            imgs: [
                {
                    id: "THE_Bagel",
                    src: "../assets/imgs/bagel.png"
                }
            ],
            snds: [
                {
                    id: "TODO",
                    src: "../assets/snds/clickDown.mp3"
                }
            ]
        },
        sprites: [
            {
                id: "THEWorldsSourceOfBagels",
                vars: {
                    delay: 0,
                    debugDisplay: document.getElementById("debug")
                },
                visible: false,
                scripts: {
                    init: [],
                    main: [
                        {
                            code: me => {
                                me.vars.delay--;
                                if (me.vars.delay <= 0) {
                                    me.vars.delay = 1;

                                    me.clone();
                                }

                                me.vars.debugDisplay.innerHTML = "FPS: " + Bagels.currentFPS + ". <br> Bagel count: " + me.cloneCount;
                            },
                            stateToRun: "Hail the bagel overlords"
                        }
                    ]
                },
                img: "THE_Bagel",
                clones: {
                    vars: {
                        distance: 0
                    },
                    visible: true,
                    scripts: {
                        init: [
                            me => {
                                me.visible = true;
                                me.scale = 0.75;

                                me.x = Bagels.width / 2;
                                me.y = Bagels.height / 2;

                                me.angle = (Math.random() * 360) - 180;
                            }
                        ],
                        main: [
                            me => {
                                me.move(1);
                                me.alpha -= 0.002;

                                if (Math.abs(me.x - (Bagels.height)) > Bagels.width + me.width || Math.abs(me.y - (Bagels.height / 2)) > Bagels.height + me.height || me.alpha < 0) {
                                    me.delete();
                                }
                            }
                        ]
                    }
                }
            }
        ]
    },
    width: 800,
    height: 450,
    state: "Hail the bagel overlords",
    config: {
        display: {
            mode: "fill"
        }
    }
});

</script>
